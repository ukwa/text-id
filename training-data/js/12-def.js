// Aa a aN
//N
// Aa a A a (a a a0.a a a.a)N
// a a aN
//N
// A) a a a a a a aN
//N
// A) a a a a a a a a, a a aN
//    a'a a a aN
N
(a(a) {N
  a (a a == "a" && a a == "a") // AaAN
    a a.a = a;N
  a (a a == "a" && a.a) // AN
    a a({a: a});N
  a.a = {a: a};N
})(a(a, a) {N
  "a a";N
N
  a a(a, a) {N
    a Aa.a.aAaAa.a(a, a);N
  }N
N
  a AaAa = a.AaAa = a(a, a, a, aAa) {N
    a.a = a || 0;N
    a.a = a;N
    a.a = a;N
    a.aAa = aAa;N
  };N
N
  a aAa(a, a, a) {N
    a a.a ? a(a, a) : a;N
  }N
N
  a aAa(a, a) {N
    a (a == "!a") {N
      a (a.a) a a.a;N
      a a = a a.Aa;N
      a.a(a a.AaAa(a.Aa, [], a, a));N
      a a;N
    } a {N
      a a.aAa(a);N
    }N
  }N
N
  a aAa(a, aAa) {N
    a a(a, aAa) {N
      a aAa = [];N
      a (a a = 0; a < a.a; a++) aAa.a(aAa(a[a], a, aAa));N
      a a a.Aa(a, a.Aa, aAa, aAa(aAa, a, aAa));N
    };N
  }N
  a aAa(a) {N
    a a(a, a) {N
      a a = a a.Aa;N
      a (a a = 0; a < a.a; a++) aAa(a[a], a, a).a(a);N
      a a;N
    };N
  }N
  a aAa(a) {N
    a a(a, a) {N
      a a a.Aa(a(a, a));N
    };N
  }N
N
  AaAa.a = {N
    a: a(a) {N
      a (a.a == 0 ? a.a.aAa(a.a) == a : a.a.aAa(a, a.a) == a.a) {N
        a.a += a.a;N
        a a;N
      }N
    },N
    a: a(a) {N
      a a = "", a, a = a || /[\a$]/;N
      a ((a = a.a.aAa(a.a)) && a.a(a)) { a += a; ++a.a; }N
      a a;N
    },N
    a: a() {N
      a a Aa("Aa a a: " + a.a + " (a " + a.a + ")");N
    },N
    aAaAa: a(a, a, a) {N
      a a = [], a = [], a = a;N
      a (!a.a(")")) a (a a = 0; ; ++a) {N
        a a = a.a.aAa(": ", a.a), a;N
        a (a != -0) {N
          a = a.a.a(a.a, a);N
          a (/^[$\a?]+$/.a(a))N
            a.a = a + 0;N
          aN
            a = a;N
        }N
        a.a(a);N
        a aAa = a.aAa(a);N
        a (aAa.a) a = a;N
        a.a(aAa);N
        a (!a.a(", ")) {N
          a.a(")") || a.a();N
          a;N
        }N
      }N
      a aAa, aAa, aAaAa, a;N
      a (a.a(" -> ")) {N
        a aAa = a.a;N
        aAa = a.aAa(a);N
        a (aAa.a) {N
          a (a) {N
            aAa = aAa;N
            aAa = a.Aa;N
            aAaAa = aAa;N
          } a {N
            a = a;N
          }N
        }N
      } a {N
        aAa = a.Aa;N
      }N
      a (a) a aAa(a, aAa);N
N
      a (a && (a = a.a))N
        a.Aa.a(a.a, a, a.Aa, a, a, aAa);N
      aN
        a = a a.Aa(a, a.Aa, a, a, aAa);N
      a (aAa) a.aAa = aAa;N
      a (aAaAa != a) a.aAaAa = a.a.a(aAaAa, a.a);N
      a a;N
    },N
    aAa: a(a, a, a) {N
      a a = a.aAaAaAa(a, a, a);N
      a (!a.a("|")) a a;N
      a a = [a], a = a.a;N
      a (;;) {N
        a a = a.aAaAaAa(a, a, a);N
        a.a(a);N
        a (a.a) a = a;N
        a (!a.a("|")) a;N
      }N
      a (a) a aAa(a);N
      a a = a a.Aa;N
      a (a a = 0; a < a.a; a++) a[a].a(a);N
      a a;N
    },N
    aAaAaAa: a(a, a, a) {N
      a a = a.aAaAa(a, a, a);N
      a (a && a.a(".")) a = a.aAaAa(a);N
      a a;N
    },N
    aAaAa: a(a) {N
      a aAa = a.a(/[\a<>$!]/) || a.a();N
      a (a.a) a a(a, a) {N
        a aAa(a(a, a), aAa);N
      };N
      a aAa(a, aAa);N
    },N
    aAaAa: a(a, a, a) {N
      a (a.a("a(")) {N
        a a.aAaAa(a, a, a);N
      } a a (a.a("[")) {N
        a a = a.aAa(a);N
        a.a("]") || a.a();N
        a (a.a) a aAa(a);N
        a (a && a.a) {N
          a.Aa.a(a.a, a);N
          a a.a;N
        }N
        a a a.Aa(a);N
      } a a (a.a("+")) {N
        a a = a.a(/[\a$<>\.!]/);N
        a a = aAa(a + ".a");N
        a a;N
        a (!(a a a.Aa)) a = aAa(a);N
        a (!(a a a.Aa)) a a;N
        a (a && a.a("[")) a a.aAa(a);N
        a (a && a.aAa) a a a.Aa(a);N
        a a.aAa(a);N
      } a a (a && a.a("!")) {N
        a a = a.a(/\a/);N
        a (a) {N
          a = Aa(a);N
          a a(_a, a) {a a[a] || a.Aa;};N
        } a a (a.a("a")) {N
          a a(a) {a a;};N
        } a a (a.a("a:")) {N
          a a = a.a(/[\a$]/);N
          a aAa[a] || a() { a a.Aa; };N
        } a {N
          a a.aAa("!" + a.a(/[\a$<>\.!]/));N
        }N
      } a a (a.a("?")) {N
        a a.Aa;N
      } a {N
        a a.aAa(a.a(/[\a$<>\.!`]/));N
      }N
    },N
    aAa: a(a) {N
      a a = a.a();N
      a (a) {N
      a "a": a a.a;N
      a "a": a a.a;N
      a "a": a a.a;N
      a "<a>": a a.aAa;N
      }N
      a (a.aAa && a a a.aAa) a a.aAa[a];N
      a aAa(a);N
    },N
    aAa: a(a) {N
      a aAa = "<a>", a;N
      a (a = a.a.a(a.a).a(/^\a*(\a+)\a*=\a*/)) {N
        aAa = a[0];N
        a.a += a[0].a;N
      }N
      a a = a.aAa(a);N
      a (!a.a("]")) a.a();N
      a (a.a) a a(a, a) {N
        a a = a.aAa(a);N
        a(a, a).a(a.aAa(aAa));N
        a a;N
      };N
      a a = a.aAa(a);N
      a.a(a.aAa(aAa));N
      a a;N
    }N
  };N
N
  a aAa(a, a, a, aAa) {N
    a a = a AaAa(a, a, a, aAa).aAa(a, a, a);N
    a (/^a\(/.a(a)) a (a a = 0; a < a.a.a; ++a) (a(a) {N
      a a = a.a[a];N
      a (a a a.Aa && a.a && a.a.a) aAa(a, a(_a, aAa) {N
        a aAa = aAa[a];N
        a (aAa) aAa.a(a a.AaAa(a.a().aAa, a.a, a, a.Aa));N
      });N
    })(a);N
    a a;N
  }N
N
  a aAa(a, a, aAa) {N
    a aAa = a.aAa, a = a.a;N
    a.aAa = a(a, a, aAa) {N
      a a = a(a, a, aAa);N
      a a = aAa ? aAa(a, a, aAa) : a;N
      a aAa ? a : a;N
    };N
  }N
N
  a aAa = a.aAa = a(a, a) {N
    a a;N
    a (a.aAa("a ") == 0) {N
      a a = a AaAa(a, 0);N
      a a = a.aAa(a);N
      a (!a.a(" ")) a.a();N
      a a = a.aAa(a);N
      aAa(a, a(a, a) {N
        aAa(a, a, a).a(aAa(a, a, a));N
      });N
    } a a (a.aAa("a ") == 0) {N
      a aAa = a.aAa("a a ", 0) == 0;N
      a a = a AaAa(a, aAa ? 0 : 0);N
      a aAa = a.aAa(a), aAa = a, aAa = [];N
      a (a.a(" a=")) aAa = a.aAa(a);N
      a (a.a(" ")) aAa.a(a.aAa(a));N
      aAa(a, a(a, a) {N
        a a = aAa(aAa, a, a);N
        a a = aAa ? aAa(aAa, a, a) : a.Aa, a = [];N
        a (a a = 0; a < aAa.a; ++a) a.a(aAa(aAa[a], a, a));N
        a a = aAa ? a a.Aa : a.Aa;N
        a.a(a a.AaAa(a, a, a, a));N
        a a;N
      }, aAa);N
    } a a (a = a.a(/^a (\A+)\a*(.*)/)) {N
      a aAa = aAa[a[0]];N
      a (aAa) aAa(a, a[0] ? aAa(a[0]) : aAa);N
    } a a (a.aAa("a ") == 0) {N
      a a = a AaAa(a, 0);N
      a aAa = a.aAa(a);N
      a.a(" ");N
      a aAa = a.aAa(a);N
      aAa(a, a(a, a) {N
        a a = aAa(aAa, a, a), a = aAa(aAa, a, a);N
        a.aAaAa(a(a, a, a) {N
          a (a && a != "<a>")N
            a.a(a a.AaAaAa(a, a));N
        });N
      });N
    } a {N
      a a Aa("Aa a a: " + a);N
    }N
  };N
N
  a aAaAa;N
N
  a aAa = a.aAa = a(a, a) {N
    a a = a.a(), a = a.a[a], aAa = a;N
    a (a != a) a a;N
    a.a[a] = a.Aa;N
N
    a a = a || aAaAa || a.aAa;N
N
    a (a.aAa) a (a a a a.aAa) {N
      a (a.aAa(a) == 0) {N
        a (a == a) a a.a[a] = a.aAa[a];N
        a (a.aAa(a.a) == ".") {N
          a = a.aAa[a];N
          a = a.a(a.a + 0);N
          a;N
        }N
      }N
    }N
N
    a a = a.a(".");N
    a (a a = 0; a < a.a && a != a.Aa; ++a) {N
      a a = a[a];N
      a (a.aAa(0) == "!") {N
        a (a == "!a") {N
          a = (a a a.Aa && a.a) || a.Aa;N
        } a {N
          a a = a.aAaAa();N
          a (!a) {N
            a = a.Aa;N
          } a a (a == "!a") {N
            a = a.a && a.a.aAa(a) || a.Aa;N
          } a {N
            a a = a.a && a.a[Aa(a.a(0))];N
            a = (a && a.aAa(a)) || a.Aa;N
          }N
        }N
      } a a (a a a.Aa) {N
        a aAa = (a == "a" && a a a.Aa) ? a.aAa(a) : a.a[a];N
        a (!aAa || aAa.aAa())N
          a = a.Aa;N
        aN
          a = aAa.a[0];N
      }N
    }N
    // Aa a a a a a a a a .a aN
    // a (a == a.Aa) a.a("a a: " + aAa + " (" + a.aAa + ")");N
    a.a[aAa] = a == a.Aa ? a : a;N
    a a;N
  };N
N
  a aAa(a) {N
    a a = Aa.a(a.a);N
    a.a = Aa.a(a);N
    a.aAa = a;N
    a a;N
  }N
N
  a aAaAa(a) {N
    a (!a["!a"] || /^(a\(|\[)/.a(a["!a"])) a a;N
    a (a a a a)N
      a (a != "!a" && a != "!a" && a != "!a" && a != "!a" && a != "!a")N
        a a;N
    a a;N
  }N
N
  a aAa(a, a, a) {N
    a (!a) {N
      a a = a["!a"];N
      a (a) {N
        a (/^a\(/.a(a)) a = aAa(a.Aa);N
        a a (a.aAa(0) == "[") a = aAa(a.Aa);N
        a a a Aa("Aa !a a: " + a);N
      } a a (a["!aAa"]) {N
        a = a.a().a[a["!aAa"]];N
      } a {N
        a = aAa(a.Aa);N
      }N
      a.a = a;N
    }N
N
    a (a a a a) a (a(a, a) && a.aAaAa(0) != 0) {N
      a a = a[a];N
      a (a a == "a" || aAaAa(a)) a;N
      a a = a.aAa(a);N
      aAa(a.aAaAa(), a, a ? a + "." + a : a).a(a);N
    }N
    a a;N
  }N
N
  a aAa(a, a, a) {N
    a (a.aAa) {N
      a a.aAa;N
      a a = a["!a"];N
      a (a) {N
        aAa(a, a, a);N
      } a {N
        a a = a["!a"] && aAa(a["!a"]);N
        a.Aa.a(a, a a a.Aa ? a : a, a);N
      }N
    }N
N
    a a = a["!a"];N
    a (a && a a a.Aa) a (a a = 0; a < a.a; ++a)N
      aAa(a[a], a);N
    aAa(a, a);N
N
    a (a a a a) a (a(a, a) && a.aAaAa(0) != 0) {N
      a a = a[a], a = a.aAa(a), aAa = a ? a + "." + a : a;N
      a (a a == "a") {N
        a (a.aAa()) aAa(a, aAa).a(a);N
      } a {N
        a (!aAaAa(a))N
          aAa(a.aAaAa(), a, aAa);N
        a a (a.aAa())N
          aAa(a["!a"], aAa, a, a).a(a);N
        aN
          a;N
        a (a["!a"]) a.a = a["!a"];N
        a (a["!a"]) a.a = a["!a"];N
        a (a["!a"]) a.a = a["!a"];N
      }N
    }N
    a a;N
  }N
N
  a aAa(a, a) {N
    a (a["!a"]) a.a = a["!a"];N
    a (a["!a"]) a.a = a["!a"];N
    a (a["!a"]) a.a = a["!a"];N
    a (a["!a"]) a.aAa = a["!a"];N
  }N
N
  a aAa(a, a) {N
    a a = a.a().a, a = a && a.a && a.a[a];N
    a (a) a (a a = 0; a < a.a; a++) a[a](a);N
  }N
N
  a aAaAa(a, a) {N
    a a = a.a();N
N
    a.aAa(a.aAa = a["!a"] || "a#" + a.a.a);N
    a.aAa = a.a[a.aAa] = Aa.a(a);N
N
    aAa("aAaAa", a);N
N
    aAa(a, a);N
N
    a a = a["!a"];N
    a (a) {N
      a (a a a a) {N
        a a = a[a];N
        a.aAa[a] = a a == "a" ? aAa(a) : aAa(a, a, a);N
      }N
      a (a a a a) {N
        a a = a[a];N
        a (a a != "a") aAa(a.aAa[a], a[a], a);N
      }N
    }N
N
    aAa(a, a);N
N
    aAa("aAaAa", a);N
N
    a.aAa = a.aAa = a;N
  }N
N
  a.a = a(a, a) {N
    a (!a) a = a.a().aAa;N
    a aAa = aAaAa;N
    aAaAa = a;N
    a {N
      aAaAa(a, a);N
    } a {N
      aAaAa = aAa;N
    }N
  };N
N
  a.a = a(a, a, a) {N
    a a = a.a();N
    a (a) {N
      a.a = a;N
      a.aAa = a.a[a];N
    }N
N
    a {N
      a (a a == "a")N
        a aAa(a, a);N
      aN
        a aAa(aAa(a, a, a), a, a);N
    } a {N
      a (a) a.a = a.aAa = a;N
    }N
  };N
N
  // Aa a a a a a a a a a aN
  // a.N
  a aAa = Aa.a(a);N
  a.aAa = a(a, a) { aAa[a] = a; };N
N
  a AaAa = a.a("a, a, a", {N
    aAa: a(a) {N
      a (a a a.Aa && a.a++ < 0) {N
        a a = a a.Aa(a), a = a.a;N
        a (a a a.Aa) a = a.aAaAa(a);N
        a (a a a.Aa) a (a a a a.a) {N
          a a = a.a[a].a[0];N
          a a = a.aAa(a);N
          a (a && a a a.Aa && a.a.a) {N
            a a = a.a.a.aAa(a);N
            a (a) a.aAa(a);N
          }N
        }N
        a.a.aAa(a);N
      }N
    }N
  });N
N
  a.aAa("Aa_a", a(_a, a, aAa) {N
    a (aAa && aAa.a && aAa[0].a == "Aa" && aAa[0].a == a)N
      a a a.Aa();N
N
    a a = a a.Aa;N
    a (a[0]) a[0].a(a AaAa(0, a, a[0]));N
    a a;N
  });N
N
  a AaAa = a.a("a", {N
    aAa: a(a) {N
      a (!(a a a.Aa)) a;N
      a (a.aAa("a"))N
        a.aAa("a").a(a.a);N
      a a (a.aAa("a"))N
        a.aAa("a").a(a a.AaAa(a.Aa, [], a, a.a));N
    }N
  });N
N
  a.aAa("Aa_aAa", a(_a, a, aAa) {N
    a (aAa && aAa.a >= 0 && aAa[0].a == "Aa" &&N
        a aAa[0].a == "a") {N
      a a = a[0], a = a a.Aa;N
      a.a(a a.AaAaAa(aAa[0].a, a, aAa[0]));N
      a[0].a(a AaAa(a));N
    }N
    a a.Aa;N
  });N
N
  a.aAa("Aa_aAa", a(_a, a, aAa) {N
    a (a.a >= 0) {N
      a a = a[0];N
      a[0].aAaAa(a(a, a, a) {N
        a (!a) a;N
        a a = a a.Aa;N
        a.a(a a.AaAaAa(a, a, aAa && aAa[0]));N
        a.a(a AaAa(a));N
      });N
    }N
    a a.Aa;N
  });N
N
  a AaAa = a.a("a, a, a", {N
    aAa: a(a) {N
      a (!(a a a.Aa)) a;N
      a.a.aAa(a a.Aa(a.a, a.Aa, a.a.a(a.a.a),N
                                       a.aAa.a(a.a.a), a.a));N
      a.a.a(a.a);N
      a (a a = 0; a < Aa.a(a.a.a, a.a.a); ++a)N
        a.a[a].a(a.a[a]);N
    }N
  });N
N
  a.aAa("Aa_a", a(a, a) {N
    a (!a.a) a a.Aa;N
    a a = a a.Aa;N
    a.a(a AaAa(a[0], a.a(0), a));N
    a a;N
  });N
N
  a.aAa("Aa_a", a(_a, a) {N
    a a = a a.Aa;N
    a (a.a != 0 || !a[0].aAa(a.a().a)) {N
      a a = a.aAa("<a>");N
      a (a a = 0; a < a.a; ++a) a[a].a(a);N
    }N
    a a;N
  });N
N
  a.aAa("Aa_a", a(_a, a, aAa) {N
    a (a.a < 0) a a.Aa;N
    a a = a a.Aa(a.a().a.a0["Aa.a"]);N
    a aAa = a.aAa("a", aAa && aAa[0]);N
    a aAa = a a.Aa;N
    aAa.a(aAa);N
    a a = a a.Aa("a", a.Aa, [aAa], ["a"], a.Aa);N
    a a = a.a().a.a0.aAa;N
    a[0].a(a a.AaAa(a.Aa, [a, a], a, a.Aa));N
    a a;N
  });N
N
  a a;N
});N
